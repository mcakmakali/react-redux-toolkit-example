{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nexports.__esModule = true;\nexports.createModel = void 0;\n\nvar debug_1 = require(\"debug\");\n\nvar outvariant_1 = require(\"outvariant\");\n\nvar get_1 = __importDefault(require(\"lodash/get\"));\n\nvar set_1 = __importDefault(require(\"lodash/set\"));\n\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\n\nvar glossary_1 = require(\"../glossary\");\n\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\n\nvar primaryKey_1 = require(\"../primaryKey\");\n\nvar Relation_1 = require(\"../relations/Relation\");\n\nvar nullable_1 = require(\"../nullable\");\n\nvar isModelValueType_1 = require(\"../utils/isModelValueType\");\n\nvar log = debug_1.debug('createModel');\n\nfunction createModel(modelName, definition, dictionary, parsedModel, initialValues, db) {\n  var _a;\n\n  var primaryKey = parsedModel.primaryKey,\n      properties = parsedModel.properties,\n      relations = parsedModel.relations;\n  log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n  var internalProperties = (_a = {}, _a[glossary_1.ENTITY_TYPE] = modelName, _a[glossary_1.PRIMARY_KEY] = primaryKey, _a);\n  var publicProperties = properties.reduce(function (properties, propertyName) {\n    var initialValue = get_1[\"default\"](initialValues, propertyName);\n    var propertyDefinition = get_1[\"default\"](definition, propertyName); // Ignore relational properties at this stage.\n\n    if (propertyDefinition instanceof Relation_1.Relation) {\n      return properties;\n    }\n\n    if (propertyDefinition instanceof primaryKey_1.PrimaryKey) {\n      set_1[\"default\"](properties, propertyName, initialValue || propertyDefinition.getPrimaryKeyValue());\n      return properties;\n    }\n\n    if (propertyDefinition instanceof nullable_1.NullableProperty) {\n      var value = initialValue === null || isModelValueType_1.isModelValueType(initialValue) ? initialValue : propertyDefinition.getValue();\n      set_1[\"default\"](properties, propertyName, value);\n      return properties;\n    }\n\n    outvariant_1.invariant(initialValue !== null, 'Failed to create a \"%s\" entity: a non-nullable property \"%s\" cannot be instantiated with null. Use the \"nullable\" function when defining this property to support nullable value.', modelName, propertyName.join('.'));\n\n    if (isModelValueType_1.isModelValueType(initialValue)) {\n      log('\"%s\" has a plain initial value:', modelName + \".\" + propertyName, initialValue);\n      set_1[\"default\"](properties, propertyName, initialValue);\n      return properties;\n    }\n\n    if (isFunction_1[\"default\"](propertyDefinition)) {\n      set_1[\"default\"](properties, propertyName, propertyDefinition());\n      return properties;\n    }\n\n    return properties;\n  }, {});\n  var entity = Object.assign({}, publicProperties, internalProperties);\n  defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, dictionary, db);\n  log('created \"%s\" entity:', modelName, entity);\n  return entity;\n}\n\nexports.createModel = createModel;","map":{"version":3,"names":["__importDefault","mod","__esModule","exports","createModel","debug_1","require","outvariant_1","get_1","set_1","isFunction_1","glossary_1","defineRelationalProperties_1","primaryKey_1","Relation_1","nullable_1","isModelValueType_1","log","debug","modelName","definition","dictionary","parsedModel","initialValues","db","_a","primaryKey","properties","relations","internalProperties","ENTITY_TYPE","PRIMARY_KEY","publicProperties","reduce","propertyName","initialValue","propertyDefinition","Relation","PrimaryKey","getPrimaryKeyValue","NullableProperty","value","isModelValueType","getValue","invariant","join","entity","Object","assign","defineRelationalProperties"],"sources":["/Users/mcakmakali/Desktop/redux-example/node_modules/@mswjs/data/lib/model/createModel.js"],"sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.createModel = void 0;\nvar debug_1 = require(\"debug\");\nvar outvariant_1 = require(\"outvariant\");\nvar get_1 = __importDefault(require(\"lodash/get\"));\nvar set_1 = __importDefault(require(\"lodash/set\"));\nvar isFunction_1 = __importDefault(require(\"lodash/isFunction\"));\nvar glossary_1 = require(\"../glossary\");\nvar defineRelationalProperties_1 = require(\"./defineRelationalProperties\");\nvar primaryKey_1 = require(\"../primaryKey\");\nvar Relation_1 = require(\"../relations/Relation\");\nvar nullable_1 = require(\"../nullable\");\nvar isModelValueType_1 = require(\"../utils/isModelValueType\");\nvar log = debug_1.debug('createModel');\nfunction createModel(modelName, definition, dictionary, parsedModel, initialValues, db) {\n    var _a;\n    var primaryKey = parsedModel.primaryKey, properties = parsedModel.properties, relations = parsedModel.relations;\n    log(\"creating a \\\"\" + modelName + \"\\\" entity (primary key: \\\"\" + primaryKey + \"\\\")\", definition, parsedModel, relations, initialValues);\n    var internalProperties = (_a = {},\n        _a[glossary_1.ENTITY_TYPE] = modelName,\n        _a[glossary_1.PRIMARY_KEY] = primaryKey,\n        _a);\n    var publicProperties = properties.reduce(function (properties, propertyName) {\n        var initialValue = get_1[\"default\"](initialValues, propertyName);\n        var propertyDefinition = get_1[\"default\"](definition, propertyName);\n        // Ignore relational properties at this stage.\n        if (propertyDefinition instanceof Relation_1.Relation) {\n            return properties;\n        }\n        if (propertyDefinition instanceof primaryKey_1.PrimaryKey) {\n            set_1[\"default\"](properties, propertyName, initialValue || propertyDefinition.getPrimaryKeyValue());\n            return properties;\n        }\n        if (propertyDefinition instanceof nullable_1.NullableProperty) {\n            var value = initialValue === null || isModelValueType_1.isModelValueType(initialValue)\n                ? initialValue\n                : propertyDefinition.getValue();\n            set_1[\"default\"](properties, propertyName, value);\n            return properties;\n        }\n        outvariant_1.invariant(initialValue !== null, 'Failed to create a \"%s\" entity: a non-nullable property \"%s\" cannot be instantiated with null. Use the \"nullable\" function when defining this property to support nullable value.', modelName, propertyName.join('.'));\n        if (isModelValueType_1.isModelValueType(initialValue)) {\n            log('\"%s\" has a plain initial value:', modelName + \".\" + propertyName, initialValue);\n            set_1[\"default\"](properties, propertyName, initialValue);\n            return properties;\n        }\n        if (isFunction_1[\"default\"](propertyDefinition)) {\n            set_1[\"default\"](properties, propertyName, propertyDefinition());\n            return properties;\n        }\n        return properties;\n    }, {});\n    var entity = Object.assign({}, publicProperties, internalProperties);\n    defineRelationalProperties_1.defineRelationalProperties(entity, initialValues, relations, dictionary, db);\n    log('created \"%s\" entity:', modelName, entity);\n    return entity;\n}\nexports.createModel = createModel;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}